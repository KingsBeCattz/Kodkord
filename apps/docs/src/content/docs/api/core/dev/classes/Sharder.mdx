---
title: Sharder
topic: api
lastUpdated: 2025-03-10
editUrl: false
next: false
prev: false
---

Defined in: kodkord-dev/lib/index.d.ts:355

The Sharder class manages multiple shards for connecting to Discord's Gateway.

It extends a `Dictionary` to map shard ids to their respective `Shard` instances. This
class provides utilities to create, manage, and control the lifecycle of shards, enabling
efficient sharding for large bots.

## Extends

- [`Dictionary`](/api/core/dev/classes/dictionary/)\<`number`, [`Shard`](/api/core/dev/classes/shard/)\>

## Constructors

### new Sharder()

```ts
new Sharder(client): Sharder
```

Defined in: kodkord-dev/lib/index.d.ts:363

Creates a new Sharder instance.

#### Parameters

| Parameter | Type | Description |
| ------ | ------ | ------ |
| `client` | [`Client`](/api/core/dev/classes/client/) | The client that owns the sharder and its shards. |

#### Returns

[`Sharder`](/api/core/dev/classes/sharder/)

#### Overrides

[`Dictionary`](/api/core/dev/classes/dictionary/).[`constructor`](/api/core/dev/classes/dictionary/#constructors)

## Properties

### size

```ts
readonly size: number;
```

Defined in: .pnpm/typescript@5.8.2/node\_modules/typescript/lib/lib.es2015.collection.d.ts:45

#### Returns

the number of elements in the Map.

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`size`](/api/core/dev/classes/dictionary/#size)

***

### \[toStringTag\]

```ts
readonly [toStringTag]: string;
```

Defined in: .pnpm/typescript@5.8.2/node\_modules/typescript/lib/lib.es2015.symbol.wellknown.d.ts:137

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`[toStringTag]`](/api/core/dev/classes/dictionary/#tostringtag)

***

### \[species\]

```ts
readonly static [species]: MapConstructor;
```

Defined in: .pnpm/typescript@5.8.2/node\_modules/typescript/lib/lib.es2015.symbol.wellknown.d.ts:319

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`[species]`](/api/core/dev/classes/dictionary/#species)

***

### name

```ts
readonly name: string;
```

Defined in: kodkord-dev/lib/index.d.ts:186

The name of the dictionary, used for identification.

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`name`](/api/core/dev/classes/dictionary/#name-1)

***

### limit

```ts
readonly limit: number;
```

Defined in: kodkord-dev/lib/index.d.ts:188

The maximum number of entries allowed in the dictionary.

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`limit`](/api/core/dev/classes/dictionary/#limit-1)

***

### client

```ts
readonly client: Client;
```

Defined in: kodkord-dev/lib/index.d.ts:357

The client instance that owns this sharder.

## Methods

### clear()

```ts
clear(): void
```

Defined in: .pnpm/typescript@5.8.2/node\_modules/typescript/lib/lib.es2015.collection.d.ts:20

#### Returns

`void`

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`clear`](/api/core/dev/classes/dictionary/#clear)

***

### delete()

```ts
delete(key): boolean
```

Defined in: .pnpm/typescript@5.8.2/node\_modules/typescript/lib/lib.es2015.collection.d.ts:24

#### Parameters

| Parameter | Type |
| ------ | ------ |
| `key` | `number` |

#### Returns

`boolean`

true if an element in the Map existed and has been removed, or false if the element does not exist.

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`delete`](/api/core/dev/classes/dictionary/#delete)

***

### forEach()

```ts
forEach(callbackfn, thisArg?): void
```

Defined in: .pnpm/typescript@5.8.2/node\_modules/typescript/lib/lib.es2015.collection.d.ts:28

Executes a provided function once per each key/value pair in the Map, in insertion order.

#### Parameters

| Parameter | Type |
| ------ | ------ |
| `callbackfn` | (`value`, `key`, `map`) => `void` |
| `thisArg`? | `any` |

#### Returns

`void`

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`forEach`](/api/core/dev/classes/dictionary/#foreach)

***

### get()

```ts
get(key): undefined | Shard
```

Defined in: .pnpm/typescript@5.8.2/node\_modules/typescript/lib/lib.es2015.collection.d.ts:33

Returns a specified element from the Map object. If the value that is associated to the provided key is an object, then you will get a reference to that object and any change made to that object will effectively modify it inside the Map.

#### Parameters

| Parameter | Type |
| ------ | ------ |
| `key` | `number` |

#### Returns

`undefined` \| [`Shard`](/api/core/dev/classes/shard/)

Returns the element associated with the specified key. If no element is associated with the specified key, undefined is returned.

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`get`](/api/core/dev/classes/dictionary/#get)

***

### has()

```ts
has(key): boolean
```

Defined in: .pnpm/typescript@5.8.2/node\_modules/typescript/lib/lib.es2015.collection.d.ts:37

#### Parameters

| Parameter | Type |
| ------ | ------ |
| `key` | `number` |

#### Returns

`boolean`

boolean indicating whether an element with the specified key exists or not.

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`has`](/api/core/dev/classes/dictionary/#has)

***

### \[iterator\]()

```ts
iterator: MapIterator<[number, Shard]>
```

Defined in: .pnpm/typescript@5.8.2/node\_modules/typescript/lib/lib.es2015.iterable.d.ts:143

Returns an iterable of entries in the map.

#### Returns

`MapIterator`\<\[`number`, [`Shard`](/api/core/dev/classes/shard/)\]\>

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`[iterator]`](/api/core/dev/classes/dictionary/#iterator)

***

### entries()

```ts
entries(): MapIterator<[number, Shard]>
```

Defined in: .pnpm/typescript@5.8.2/node\_modules/typescript/lib/lib.es2015.iterable.d.ts:148

Returns an iterable of key, value pairs for every entry in the map.

#### Returns

`MapIterator`\<\[`number`, [`Shard`](/api/core/dev/classes/shard/)\]\>

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`entries`](/api/core/dev/classes/dictionary/#entries)

***

### keys()

```ts
keys(): MapIterator<number>
```

Defined in: .pnpm/typescript@5.8.2/node\_modules/typescript/lib/lib.es2015.iterable.d.ts:153

Returns an iterable of keys in the map

#### Returns

`MapIterator`\<`number`\>

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`keys`](/api/core/dev/classes/dictionary/#keys)

***

### values()

```ts
values(): MapIterator<Shard>
```

Defined in: .pnpm/typescript@5.8.2/node\_modules/typescript/lib/lib.es2015.iterable.d.ts:158

Returns an iterable of values in the map

#### Returns

`MapIterator`\<[`Shard`](/api/core/dev/classes/shard/)\>

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`values`](/api/core/dev/classes/dictionary/#values)

***

### filter()

```ts
filter(callback): Dictionary<number, Shard>
```

Defined in: kodkord-dev/lib/index.d.ts:205

Filters the entries of the dictionary based on the provided callback.

#### Parameters

| Parameter | Type | Description |
| ------ | ------ | ------ |
| `callback` | (`value`, `key`, `dict`) => `boolean` | A function to test each entry. Returns `true` to keep the entry, `false` otherwise. |

#### Returns

[`Dictionary`](/api/core/dev/classes/dictionary/)\<`number`, [`Shard`](/api/core/dev/classes/shard/)\>

A new `Dictionary` with the filtered entries.

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`filter`](/api/core/dev/classes/dictionary/#filter)

***

### find()

```ts
find(callback): undefined | Shard
```

Defined in: kodkord-dev/lib/index.d.ts:212

Finds the first value in the dictionary that satisfies the provided callback.

#### Parameters

| Parameter | Type | Description |
| ------ | ------ | ------ |
| `callback` | (`value`, `key`, `dict`) => `boolean` | A function to test each entry. Returns `true` for the desired entry. |

#### Returns

`undefined` \| [`Shard`](/api/core/dev/classes/shard/)

The first value that satisfies the callback, or `undefined` if none do.

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`find`](/api/core/dev/classes/dictionary/#find)

***

### every()

```ts
every(callback): boolean
```

Defined in: kodkord-dev/lib/index.d.ts:219

Tests whether all entries in the dictionary pass the provided callback.

#### Parameters

| Parameter | Type | Description |
| ------ | ------ | ------ |
| `callback` | (`value`, `key`, `dict`) => `boolean` | A function to test each entry. Returns `true` for entries that pass. |

#### Returns

`boolean`

`true` if all entries pass the callback, otherwise `false`.

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`every`](/api/core/dev/classes/dictionary/#every)

***

### some()

```ts
some(callback): boolean
```

Defined in: kodkord-dev/lib/index.d.ts:226

Tests whether at least one entry in the dictionary passes the provided callback.

#### Parameters

| Parameter | Type | Description |
| ------ | ------ | ------ |
| `callback` | (`value`, `key`, `dict`) => `boolean` | A function to test each entry. Returns `true` for entries that pass. |

#### Returns

`boolean`

`true` if at least one entry passes the callback, otherwise `false`.

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`some`](/api/core/dev/classes/dictionary/#some)

***

### reduce()

```ts
reduce<T>(callback, initial): T
```

Defined in: kodkord-dev/lib/index.d.ts:234

Reduces the dictionary's entries to a single value using the provided callback.

#### Type Parameters

| Type Parameter |
| ------ |
| `T` |

#### Parameters

| Parameter | Type | Description |
| ------ | ------ | ------ |
| `callback` | (`accumulator`, `value`, `key`, `dict`) => `T` | A function to process each entry. |
| `initial` | `T` | The initial accumulator value. |

#### Returns

`T`

The result of the reduction.

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`reduce`](/api/core/dev/classes/dictionary/#reduce)

***

### map()

```ts
map<T>(callback): Dictionary<number, T>
```

Defined in: kodkord-dev/lib/index.d.ts:241

Maps the dictionary's entries to a new `Dictionary` with transformed values.

#### Type Parameters

| Type Parameter |
| ------ |
| `T` |

#### Parameters

| Parameter | Type | Description |
| ------ | ------ | ------ |
| `callback` | (`value`, `key`, `dict`) => `T` | A function to transform each entry. |

#### Returns

[`Dictionary`](/api/core/dev/classes/dictionary/)\<`number`, `T`\>

A new `Dictionary` with the mapped values.

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`map`](/api/core/dev/classes/dictionary/#map-1)

***

### set()

```ts
set(key, value): this
```

Defined in: kodkord-dev/lib/index.d.ts:251

Adds or updates an entry in the dictionary.

If the dictionary has reached its limit, the entry will not be added.

#### Parameters

| Parameter | Type | Description |
| ------ | ------ | ------ |
| `key` | `number` | The key of the entry. |
| `value` | [`Shard`](/api/core/dev/classes/shard/) | The value of the entry. |

#### Returns

`this`

The current dictionary instance.

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`set`](/api/core/dev/classes/dictionary/#set)

***

### first()

```ts
first(): undefined | Shard
```

Defined in: kodkord-dev/lib/index.d.ts:257

Retrieves the first value in the dictionary.

#### Returns

`undefined` \| [`Shard`](/api/core/dev/classes/shard/)

The first value, or `undefined` if the dictionary is empty.

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`first`](/api/core/dev/classes/dictionary/#first)

***

### last()

```ts
last(): undefined | Shard
```

Defined in: kodkord-dev/lib/index.d.ts:263

Retrieves the last value in the dictionary.

#### Returns

`undefined` \| [`Shard`](/api/core/dev/classes/shard/)

The last value, or `undefined` if the dictionary is empty.

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`last`](/api/core/dev/classes/dictionary/#last)

***

### clone()

```ts
clone(): Dictionary<number, Shard>
```

Defined in: kodkord-dev/lib/index.d.ts:269

Creates a shallow copy of the dictionary.

#### Returns

[`Dictionary`](/api/core/dev/classes/dictionary/)\<`number`, [`Shard`](/api/core/dev/classes/shard/)\>

A new `Dictionary` instance with the same entries, limit, and name.

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`clone`](/api/core/dev/classes/dictionary/#clone)

***

### remaining()

```ts
remaining(): number
```

Defined in: kodkord-dev/lib/index.d.ts:275

Calculates the number of additional entries that can be added to the dictionary.

#### Returns

`number`

The number of remaining entries before reaching the limit.

#### Inherited from

[`Dictionary`](/api/core/dev/classes/dictionary/).[`remaining`](/api/core/dev/classes/dictionary/#remaining)

***

### create()

```ts
create(id, settings?): Shard
```

Defined in: kodkord-dev/lib/index.d.ts:374

Creates a new shard with the given Id.

- If a shard with the specified Id already exists, logs a panic and returns the existing shard.
- Otherwise, it creates a new shard, stores it in the dictionary, and returns it.

#### Parameters

| Parameter | Type | Description |
| ------ | ------ | ------ |
| `id` | `number` | The Id of the shard to create. |
| `settings`? | `Partial`\<[`WebSocketSettings`](/api/core/dev/interfaces/websocketsettings/)\> | Optional settings to override default shard configurations. |

#### Returns

[`Shard`](/api/core/dev/classes/shard/)

The newly created or existing shard.

***

### guildShardId()

```ts
guildShardId(guildId): Promise<number>
```

Defined in: kodkord-dev/lib/index.d.ts:381

Calculates the shard ID responsible for a specific guild.

#### Parameters

| Parameter | Type | Description |
| ------ | ------ | ------ |
| `guildId` | `string` | The ID of the guild. |

#### Returns

`Promise`\<`number`\>

A Promise resolving to the shard ID.

***

### reashard()

```ts
reashard(shards): void
```

Defined in: kodkord-dev/lib/index.d.ts:390

Adjusts the number of shards dynamically.

- If the new shard count is less than the current count, logs a panic and does nothing.
- Otherwise, creates additional shards as needed to match the new count.

#### Parameters

| Parameter | Type | Description |
| ------ | ------ | ------ |
| `shards` | `number` | The new number of shards. |

#### Returns

`void`

***

### forceIdentify()

```ts
forceIdentify(id): void
```

Defined in: kodkord-dev/lib/index.d.ts:399

Forces a specific shard to identify and reconnect to the Gateway.

- If the shard doesn't exist, it creates the shard first.
- If the shard is disconnected, it connects and identifies the shard.

#### Parameters

| Parameter | Type | Description |
| ------ | ------ | ------ |
| `id` | `number` | The Id of the shard to force identification for. |

#### Returns

`void`

***

### connect()

```ts
connect(): void
```

Defined in: kodkord-dev/lib/index.d.ts:405

Connects all shards to Discord's Gateway.

Iterates over all stored shards and invokes their `connect` method.

#### Returns

`void`

***

### reconnet()

```ts
reconnet(): void
```

Defined in: kodkord-dev/lib/index.d.ts:412

Reconnects all shards to Discord's Gateway.

- Disconnects each shard.
- Reconnects each shard.

#### Returns

`void`

***

### disconnect()

```ts
disconnect(): void
```

Defined in: kodkord-dev/lib/index.d.ts:418

Disconnects all shards from Discord's Gateway.

Iterates over all stored shards and invokes their `disconnect` method.

#### Returns

`void`
